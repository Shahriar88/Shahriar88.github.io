<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>URDF Viewer</title>
  <style>
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    #container { width: 100%; height: 70vh; }
    #panel { padding:12px; box-shadow: 0 6px 24px rgba(0,0,0,.08); margin:12px; border-radius:12px; }
    textarea { width:100%; height:180px; font-family:monospace; }
    button { margin-right:8px; padding:6px 10px; border-radius:8px; }
  </style>
</head>
<body>

  <div id="panel">
    <h2 style="margin:0 0 8px">URDF Viewer</h2>
    <div><b>Robot's URDF</b></div>
    <textarea id="robottext" placeholder="Your URDF will be loaded here…"></textarea><br>
    <button type="button" id="loadbutton">Load robot URDF</button>
  </div>

  <!-- Three.js canvas host that scene.js expects -->
  <div id="container"></div>

  <!-- ====== JS dependencies (use your /js_urdf/ copies) ====== -->
  <script src="/js_urdf/three.min.js"></script>
  <script src="/js_urdf/jquery-3.7.1.min.js"></script>
  <script src="/js_urdf/jquery.xml2json.js"></script>
  <script src="/js_urdf/underscore.js"></script>
  <script src="/js_urdf/backbone.js"></script>
  <script src="/js_urdf/modelrobot.js"></script>
  <script src="/js_urdf/parserobot.js"></script>
  <script src="/js_urdf/scene.js"></script>
  <script src="/js_urdf/animate.js"></script>
  <script src="/js_urdf/TrackballControls.js"></script>

  <!-- ====== Auto-load your URDF and trigger the site’s loader ====== -->
  <script>
    // 1) fetch your URDF as text and put it into the textarea
    fetch('assets/robot.urdf', { cache: 'no-store' })
      .then(r => {
        if (!r.ok) throw new Error('Could not fetch assets/robot.urdf');
        return r.text();
      })
      .then(txt => {
        document.getElementById('robottext').value = txt;

        // 2) click the same button the app expects (modelrobot.js/parserobot.js wire to #loadbutton)
        document.getElementById('loadbutton').click();
      })
      .catch(err => {
        console.error(err);
        alert('Failed to load assets/robot.urdf — check the file path and commit.');
      });
  </script>
</body>
</html>
